import{R as Le,U as me,V as Ve,C as Me,b as q,d as G,_ as pe,a as X,f as ne,E as K,D as Ie,W as ve,w as We,c as De}from"./_plugin-vue_export-helper-BWLaGAZA.js";import{a2 as se,d as V,A as Ue,af as H,o as ge,a6 as Ke,i as ie,r as P,y as W,z as ye,c as _e,a as Ce,q as He,n as Ne,u as $,E as Y,l as R,W as Ge,N as g,ag as Ye,v as qe,ah as Xe,B as Ze,b as le,_ as Je,g as Ee,p as Qe,k as je,x as et,ai as tt,C as at,P as nt,D as st}from"./index-CX-UEV3f.js";import{j as lt,a as ce,b as oe,k as ot,l as rt,m as be,E as A}from"./aria-CE64aO7b.js";import{i as it,c as ct,r as ut}from"./raf-CgTViCYJ.js";import{i as dt,U as Te}from"./el-input-DWNXWrNm.js";import{m as re}from"./typescript-Bp3YSIOJ.js";import{t as te,c as z}from"./el-select-DqyLYWoW.js";import{f as ft}from"./el-scrollbar-gICCFP9m.js";import{c as vt,g as bt,e as ht}from"./_baseClone-BiDlxgIA.js";function mt(e,t,a){var u=-1,n=e.length;t<0&&(t=-t>n?0:n+t),a=a>n?n:a,a<0&&(a+=n),n=t>a?0:a-t>>>0,t>>>=0;for(var s=Array(n);++u<n;)s[u]=e[u+t];return s}function pt(e,t,a){return e===e&&(a!==void 0&&(e=e<=a?e:a),t!==void 0&&(e=e>=t?e:t)),e}function gt(e,t,a){return a===void 0&&(a=t,t=void 0),a!==void 0&&(a=te(a),a=a===a?a:0),t!==void 0&&(t=te(t),t=t===t?t:0),pt(te(e),t,a)}function yt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function _t(e,t){return t.length<2?e:Le(e,mt(t,0,-1))}function Ct(e,t){return t=me(t,e),e=_t(e,t),e==null||delete e[Ve(yt(t))]}function Nt(e){return it(e)?void 0:e}var Et=1,Tt=2,Pt=4,St=lt(function(e,t){var a={};if(e==null)return a;var u=!1;t=Me(t,function(s){return s=me(s,e),u||(u=s.length>1),s}),vt(e,bt(e),a),u&&(a=ht(a,Et|Tt|Pt,Nt));for(var n=t.length;n--;)Ct(a,t[n]);return a});const Rt=(e,t,a)=>ft(e.subTree).filter(s=>{var _;return Ke(s)&&((_=s.type)==null?void 0:_.name)===t&&!!s.component}).map(s=>s.component.uid).map(s=>a[s]).filter(s=>!!s),Ot=(e,t)=>{const a=se({}),u=se([]),n=new WeakMap,s=p=>{a.value[p.uid]=p,H(a),ge(()=>{const v=p.getVnode().el,l=v.parentNode;if(!n.has(l)){n.set(l,[]);const d=l.insertBefore.bind(l);l.insertBefore=(N,i)=>(n.get(l).some(E=>N===E||i===E)&&H(a),d(N,i))}n.get(l).push(v)})},_=p=>{delete a.value[p.uid],H(a);const v=p.getVnode().el,l=v.parentNode,d=n.get(l),N=d.indexOf(v);d.splice(N,1)},m=()=>{u.value=Rt(e,t,a.value)},f=p=>p.render(),b=V({setup(p,{slots:v}){return()=>(m(),v.default?Ue(f,{render:v.default}):null)}});return{children:u,addChild:s,removeChild:_,ChildrenSorter:b}},xt="horizontal",wt="vertical",$t={[xt]:"deltaX",[wt]:"deltaY"},Bt=({atEndEdge:e,atStartEdge:t,layout:a},u)=>{let n,s=0;const _=f=>f<0&&t.value||f>0&&e.value;return{hasReachedEdge:_,onWheel:f=>{ct(n);const b=f[$t[a.value]];_(s)&&_(s+b)||(s+=b,dt()||f.preventDefault(),n=ut(()=>{u(s),s=0}))}}},Z=Symbol("tabsRootContextKey"),kt=q({tabs:{type:G(Array),default:()=>re([])},tabRefs:{type:G(Object),default:()=>re({})}}),Pe="ElTabBar",At=V({name:Pe}),zt=V({...At,props:kt,setup(e,{expose:t}){const a=e,u=ie(Z);u||ce(Pe,"<el-tabs><el-tab-bar /></el-tabs>");const n=X("tabs"),s=P(),_=P(),m=()=>{let l=0,d=0;const N=["top","bottom"].includes(u.props.tabPosition)?"width":"height",i=N==="width"?"x":"y",x=i==="x"?"left":"top";return a.tabs.every(E=>{if(ne(E.paneName))return!1;const o=a.tabRefs[E.paneName];if(!o)return!1;if(!E.active)return!0;l=o[`offset${z(x)}`],d=o[`client${z(N)}`];const T=window.getComputedStyle(o);return N==="width"&&(d-=Number.parseFloat(T.paddingLeft)+Number.parseFloat(T.paddingRight),l+=Number.parseFloat(T.paddingLeft)),!1}),{[N]:`${d}px`,transform:`translate${z(i)}(${l}px)`}},f=()=>_.value=m(),b=[],p=()=>{b.forEach(l=>l.stop()),b.length=0,Object.values(a.tabRefs).forEach(l=>{b.push(oe(l,f))})};W(()=>a.tabs,async()=>{await Y(),f(),p()},{immediate:!0});const v=oe(s,()=>f());return ye(()=>{b.forEach(l=>l.stop()),b.length=0,v.stop()}),t({ref:s,update:f}),(l,d)=>(Ce(),_e("div",{ref_key:"barRef",ref:s,class:Ne([$(n).e("active-bar"),$(n).is($(u).props.tabPosition)]),style:He(_.value)},null,6))}});var Ft=pe(zt,[["__file","tab-bar.vue"]]);const Lt=q({panes:{type:G(Array),default:()=>re([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Vt={tabClick:(e,t,a)=>a instanceof Event,tabRemove:(e,t)=>t instanceof Event},he="ElTabNav",Mt=V({name:he,props:Lt,emits:Vt,setup(e,{expose:t,emit:a}){const u=ie(Z);u||ce(he,"<el-tabs><tab-nav /></el-tabs>");const n=X("tabs"),s=ot(),_=rt(),m=P(),f=P(),b=P(),p=P({}),v=P(),l=P(!1),d=P(0),N=P(!1),i=P(!0),x=se(),E=R(()=>["top","bottom"].includes(u.props.tabPosition)),o=R(()=>E.value?"width":"height"),T=R(()=>({transform:`translate${o.value==="width"?"X":"Y"}(-${d.value}px)`})),{width:S,height:F}=be(m),{width:M,height:I}=be(f,{width:0,height:0},{box:"border-box"}),L=R(()=>E.value?S.value:F.value),B=R(()=>E.value?M.value:I.value),{onWheel:J}=Bt({atStartEdge:R(()=>d.value<=0),atEndEdge:R(()=>B.value-d.value<=L.value),layout:R(()=>E.value?"horizontal":"vertical")},c=>{d.value=gt(d.value+c,0,B.value-L.value)}),Oe=()=>{if(!m.value)return;const c=m.value[`offset${z(o.value)}`],h=d.value;if(!h)return;const r=h>c?h-c:0;d.value=r},xe=()=>{if(!m.value||!f.value)return;const c=f.value[`offset${z(o.value)}`],h=m.value[`offset${z(o.value)}`],r=d.value;if(c-r<=h)return;const C=c-r>h*2?r+h:c-h;d.value=C},ue=async()=>{const c=f.value;if(!l.value||!b.value||!m.value||!c)return;await Y();const h=p.value[e.currentName];if(!h)return;const r=m.value,C=h.getBoundingClientRect(),y=r.getBoundingClientRect(),D=E.value?c.offsetWidth-y.width:c.offsetHeight-y.height,k=d.value;let O=k;E.value?(C.left<y.left&&(O=k-(y.left-C.left)),C.right>y.right&&(O=k+C.right-y.right)):(C.top<y.top&&(O=k-(y.top-C.top)),C.bottom>y.bottom&&(O=k+(C.bottom-y.bottom))),O=Math.max(O,0),d.value=Math.min(O,D)},de=()=>{var c;if(!f.value||!m.value)return;e.stretch&&((c=v.value)==null||c.update());const h=f.value[`offset${z(o.value)}`],r=m.value[`offset${z(o.value)}`],C=d.value;r<h?(l.value=l.value||{},l.value.prev=C,l.value.next=C+r<h,h-C<r&&(d.value=h-r)):(l.value=!1,C>0&&(d.value=0))},we=c=>{let h=0;switch(c.code){case A.left:case A.up:h=-1;break;case A.right:case A.down:h=1;break;default:return}const r=Array.from(c.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let y=r.indexOf(c.target)+h;y<0?y=r.length-1:y>=r.length&&(y=0),r[y].focus({preventScroll:!0}),r[y].click(),fe()},fe=()=>{i.value&&(N.value=!0)},Q=()=>N.value=!1,$e=(c,h)=>{p.value[h]=c},Be=async()=>{await Y();const c=p.value[e.currentName];c==null||c.focus({preventScroll:!0})};return W(s,c=>{c==="hidden"?i.value=!1:c==="visible"&&setTimeout(()=>i.value=!0,50)}),W(_,c=>{c?setTimeout(()=>i.value=!0,50):i.value=!1}),oe(b,de),ge(()=>setTimeout(()=>ue(),0)),Ge(()=>de()),t({scrollToActiveTab:ue,removeFocus:Q,focusActiveTab:Be,tabListRef:f,tabBarRef:v,scheduleRender:()=>H(x)}),()=>{const c=l.value?[g("span",{class:[n.e("nav-prev"),n.is("disabled",!l.value.prev)],onClick:Oe},[g(K,null,{default:()=>[g(Ye,null,null)]})]),g("span",{class:[n.e("nav-next"),n.is("disabled",!l.value.next)],onClick:xe},[g(K,null,{default:()=>[g(qe,null,null)]})])]:null,h=e.panes.map((r,C)=>{var y,D,k,O;const ke=r.uid,j=r.props.disabled,U=(D=(y=r.props.name)!=null?y:r.index)!=null?D:`${C}`,ee=!j&&(r.isClosable||r.props.closable!==!1&&e.editable);r.index=`${C}`;const Ae=ee?g(K,{class:"is-icon-close",onClick:w=>a("tabRemove",r,w)},{default:()=>[g(Xe,null,null)]}):null,ze=((O=(k=r.slots).label)==null?void 0:O.call(k))||r.props.label,Fe=!j&&r.active?0:-1;return g("div",{ref:w=>$e(w,U),class:[n.e("item"),n.is(u.props.tabPosition),n.is("active",r.active),n.is("disabled",j),n.is("closable",ee),n.is("focus",N.value)],id:`tab-${U}`,key:`tab-${ke}`,"aria-controls":`pane-${U}`,role:"tab","aria-selected":r.active,tabindex:Fe,onFocus:()=>fe(),onBlur:()=>Q(),onClick:w=>{Q(),a("tabClick",r,U,w)},onKeydown:w=>{ee&&(w.code===A.delete||w.code===A.backspace)&&a("tabRemove",r,w)}},[ze,Ae])});return x.value,g("div",{ref:b,class:[n.e("nav-wrap"),n.is("scrollable",!!l.value),n.is(u.props.tabPosition)]},[c,g("div",{class:n.e("nav-scroll"),ref:m},[e.panes.length>0?g("div",{class:[n.e("nav"),n.is(u.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(u.props.tabPosition))],ref:f,style:T.value,role:"tablist",onKeydown:we,onWheel:J},[e.type?null:g(Ft,{ref:v,tabs:[...e.panes],tabRefs:p.value},null),h]):null])])}}}),It=q({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:G(Function),default:()=>!0},stretch:Boolean}),ae=e=>Ze(e)||Ie(e),Wt={[Te]:e=>ae(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>ae(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>ae(e),tabAdd:()=>!0},Dt=V({name:"ElTabs",props:It,emits:Wt,setup(e,{emit:t,slots:a,expose:u}){var n;const s=X("tabs"),_=R(()=>["left","right"].includes(e.tabPosition)),{children:m,addChild:f,removeChild:b,ChildrenSorter:p}=Ot(Ee(),"ElTabPane"),v=P(),l=P((n=e.modelValue)!=null?n:"0"),d=async(o,T=!1)=>{var S,F,M,I;if(!(l.value===o||ne(o)))try{let L;if(e.beforeLeave){const B=e.beforeLeave(o,l.value);L=B instanceof Promise?await B:B}else L=!0;if(L!==!1){const B=(S=m.value.find(J=>J.paneName===l.value))==null?void 0:S.isFocusInsidePane();l.value=o,T&&(t(Te,o),t("tabChange",o)),(M=(F=v.value)==null?void 0:F.removeFocus)==null||M.call(F),B&&((I=v.value)==null||I.focusActiveTab())}}catch{}},N=(o,T,S)=>{o.props.disabled||(t("tabClick",o,S),d(T,!0))},i=(o,T)=>{o.props.disabled||ne(o.props.name)||(T.stopPropagation(),t("edit",o.props.name,"remove"),t("tabRemove",o.props.name))},x=()=>{t("edit",void 0,"add"),t("tabAdd")},E=o=>{const T=o.el.firstChild,S=["bottom","right"].includes(e.tabPosition)?o.children[0].el:o.children[1].el;T!==S&&T.before(S)};return W(()=>e.modelValue,o=>d(o)),W(l,async()=>{var o;await Y(),(o=v.value)==null||o.scrollToActiveTab()}),Qe(Z,{props:e,currentName:l,registerPane:f,unregisterPane:b,nav$:v}),u({currentName:l,get tabNavRef(){return St(v.value,["scheduleRender"])}}),()=>{const o=a["add-icon"],T=e.editable||e.addable?g("div",{class:[s.e("new-tab"),_.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:x,onKeydown:I=>{[A.enter,A.numpadEnter].includes(I.code)&&x()}},[o?le(a,"add-icon"):g(K,{class:s.is("icon-plus")},{default:()=>[g(Je,null,null)]})]):null,S=()=>g(Mt,{ref:v,currentName:l.value,editable:e.editable,type:e.type,panes:m.value,stretch:e.stretch,onTabClick:N,onTabRemove:i},null),F=g("div",{class:[s.e("header"),_.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[g(p,null,{default:S,$stable:!0}),T]),M=g("div",{class:s.e("content")},[le(a,"default")]);return g("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}],onVnodeMounted:E,onVnodeUpdated:E},[M,F])}}});var Ut=Dt;const Kt=q({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Se="ElTabPane",Ht=V({name:Se}),Gt=V({...Ht,props:Kt,setup(e){const t=e,a=Ee(),u=je(),n=ie(Z);n||ce(Se,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=X("tab-pane"),_=P(),m=P(),f=R(()=>{var i;return(i=t.closable)!=null?i:n.props.closable}),b=ve(()=>{var i;return n.currentName.value===((i=t.name)!=null?i:m.value)}),p=P(b.value),v=R(()=>{var i;return(i=t.name)!=null?i:m.value}),l=ve(()=>!t.lazy||p.value||b.value),d=()=>{var i;return(i=_.value)==null?void 0:i.contains(document.activeElement)};W(b,i=>{i&&(p.value=!0)});const N=et({uid:a.uid,getVnode:()=>a.vnode,slots:u,props:t,paneName:v,active:b,index:m,isClosable:f,isFocusInsidePane:d});return n.registerPane(N),ye(()=>{n.unregisterPane(N)}),tt(()=>{var i;u.label&&((i=n.nav$.value)==null||i.scheduleRender())}),(i,x)=>$(l)?at((Ce(),_e("div",{key:0,id:`pane-${$(v)}`,ref_key:"paneRef",ref:_,class:Ne($(s).b()),role:"tabpanel","aria-hidden":!$(b),"aria-labelledby":`tab-${$(v)}`},[le(i.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[st,$(b)]]):nt("v-if",!0)}});var Re=pe(Gt,[["__file","tab-pane.vue"]]);const aa=We(Ut,{TabPane:Re}),na=De(Re);export{na as E,aa as a};
