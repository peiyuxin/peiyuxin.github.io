import{_ as K,b as Q,d as R,i as $e,E as ue,l as pe,a as oe,u as Oe,a2 as Se,H as Fe,a1 as fe,c as me,w as Ne}from"./_plugin-vue_export-helper-BWLaGAZA.js";import{d as P,u as ae,r as Re,e as Z,O as Pe,E as ke,w as ie,F as Be}from"./el-popper-CJXKSruS.js";import{E as Ke}from"./el-scrollbar-gICCFP9m.js";import{g as De,E as C,h as Me}from"./aria-CE64aO7b.js";import{d as D,b as k,r as I,i as E,o as Ae,u as T,z as Le,p as Y,l as y,K as J,av as Ge,y as ze,V as _,f as U,a as B,w as b,N as S,aw as Ye,ax as Ue,c as j,P as x,$ as He,m as W,n as q,s as Je,g as ve,E as Ve,e as je,h as We,a0 as ee,F as qe,q as Qe}from"./index-CX-UEV3f.js";import{c as ge}from"./refs-DPI-StBw.js";const Xe=D({inheritAttrs:!1});function Ze(e,n,l,t,s,p){return k(e.$slots,"default")}var xe=K(Xe,[["render",Ze],["__file","collection.vue"]]);const eo=D({name:"ElCollectionItem",inheritAttrs:!1});function oo(e,n,l,t,s,p){return k(e.$slots,"default")}var no=K(eo,[["render",oo],["__file","collection-item.vue"]]);const we="data-el-collection-item",be=e=>{const n=`El${e}Collection`,l=`${n}Item`,t=Symbol(n),s=Symbol(l),p={...xe,name:n,setup(){const r=I(),d=new Map;Y(t,{itemMap:d,getItems:()=>{const m=T(r);if(!m)return[];const f=Array.from(m.querySelectorAll(`[${we}]`));return[...d.values()].sort((o,i)=>f.indexOf(o.ref)-f.indexOf(i.ref))},collectionRef:r})}},a={...no,name:l,setup(r,{attrs:d}){const g=I(),m=E(t,void 0);Y(s,{collectionItemRef:g}),Ae(()=>{const f=T(g);f&&m.itemMap.set(f,{ref:f,...d})}),Le(()=>{const f=T(g);m.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:p,ElCollectionItem:a}},to=Q({style:{type:R([String,Array,Object])},currentTabId:{type:R(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:R(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ro,ElCollectionItem:lo,COLLECTION_INJECTION_KEY:ne,COLLECTION_ITEM_INJECTION_KEY:so}=be("RovingFocusGroup"),te=Symbol("elRovingFocusGroup"),_e=Symbol("elRovingFocusGroupItem"),ao={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},io=(e,n)=>e,co=(e,n,l)=>{const t=io(e.code);return ao[t]},uo=(e,n)=>e.map((l,t)=>e[(t+n)%e.length]),re=e=>{const{activeElement:n}=document;for(const l of e)if(l===n||(l.focus(),n!==document.activeElement))return},de="currentTabIdChange",ce="rovingFocusGroup.entryFocus",po={bubbles:!1,cancelable:!0},fo=D({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:to,emits:[de,"entryFocus"],setup(e,{emit:n}){var l;const t=I((l=e.currentTabId||e.defaultCurrentTabId)!=null?l:null),s=I(!1),p=I(!1),a=I(),{getItems:r}=E(ne,void 0),d=y(()=>[{outline:"none"},e.style]),g=c=>{n(de,c)},m=()=>{s.value=!0},f=P(c=>{var v;(v=e.onMousedown)==null||v.call(e,c)},()=>{p.value=!0}),h=P(c=>{var v;(v=e.onFocus)==null||v.call(e,c)},c=>{const v=!T(p),{target:M,currentTarget:F}=c;if(M===F&&v&&!T(s)){const A=new Event(ce,po);if(F==null||F.dispatchEvent(A),!A.defaultPrevented){const w=r().filter(O=>O.focusable),N=w.find(O=>O.active),$=w.find(O=>O.id===T(t)),G=[N,$,...w].filter(Boolean).map(O=>O.ref);re(G)}}p.value=!1}),o=P(c=>{var v;(v=e.onBlur)==null||v.call(e,c)},()=>{s.value=!1}),i=(...c)=>{n("entryFocus",...c)};Y(te,{currentTabbedId:Ge(t),loop:J(e,"loop"),tabIndex:y(()=>T(s)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:d,orientation:J(e,"orientation"),dir:J(e,"dir"),onItemFocus:g,onItemShiftTab:m,onBlur:o,onFocus:h,onMousedown:f}),ze(()=>e.currentTabId,c=>{t.value=c??null}),De(a,ce,i)}});function mo(e,n,l,t,s,p){return k(e.$slots,"default")}var vo=K(fo,[["render",mo],["__file","roving-focus-group-impl.vue"]]);const go=D({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ro,ElRovingFocusGroupImpl:vo}});function wo(e,n,l,t,s,p){const a=_("el-roving-focus-group-impl"),r=_("el-focus-group-collection");return B(),U(r,null,{default:b(()=>[S(a,Ye(Ue(e.$attrs)),{default:b(()=>[k(e.$slots,"default")]),_:3},16)]),_:3})}var bo=K(go,[["render",wo],["__file","roving-focus-group.vue"]]);const _o=Q({trigger:Z.trigger,triggerKeys:{type:R(Array),default:()=>[C.enter,C.numpadEnter,C.space,C.down]},virtualTriggering:Z.virtualTriggering,virtualRef:Z.virtualRef,effect:{...ae.effect,default:"light"},type:{type:R(String)},placement:{type:R(String),default:"bottom"},popperOptions:{type:R(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:R([Number,String]),default:0},maxHeight:{type:R([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:Re,default:"menu"},buttonProps:{type:R(Object)},teleported:ae.teleported,persistent:{type:Boolean,default:!0}}),Ie=Q({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:$e}}),Io=Q({onKeydown:{type:R(Function)}}),Eo=[C.down,C.pageDown,C.home],Ee=[C.up,C.pageUp,C.end],Co=[...Eo,...Ee],{ElCollection:ho,ElCollectionItem:yo,COLLECTION_INJECTION_KEY:To,COLLECTION_ITEM_INJECTION_KEY:$o}=be("Dropdown"),X=Symbol("elDropdown"),Ce="elDropdown",{ButtonGroup:Oo}=pe,So=D({name:"ElDropdown",components:{ElButton:pe,ElButtonGroup:Oo,ElScrollbar:Ke,ElDropdownCollection:ho,ElTooltip:ke,ElRovingFocusGroup:bo,ElOnlyChild:Pe,ElIcon:ue,ArrowDown:Je},props:_o,emits:["visible-change","click","command"],setup(e,{emit:n}){const l=ve(),t=oe("dropdown"),{t:s}=Oe(),p=I(),a=I(),r=I(),d=I(),g=I(null),m=I(null),f=I(!1),h=y(()=>({maxHeight:Se(e.maxHeight)})),o=y(()=>[t.m(w.value)]),i=y(()=>Me(e.trigger)),c=fe().value,v=y(()=>e.id||c);function M(){var u;(u=r.value)==null||u.onClose(void 0,0)}function F(){var u;(u=r.value)==null||u.onClose()}function A(){var u;(u=r.value)==null||u.onOpen()}const w=Fe();function N(...u){n("command",...u)}function $(){}function L(){const u=T(d);i.value.includes("hover")&&(u==null||u.focus({preventScroll:!0})),m.value=null}function G(u){m.value=u}function O(u){f.value||(u.preventDefault(),u.stopImmediatePropagation())}function le(){n("visible-change",!0)}function V(u){var z;(u==null?void 0:u.type)==="keydown"&&((z=d.value)==null||z.focus())}function H(){n("visible-change",!1)}return Y(X,{contentRef:d,role:y(()=>e.role),triggerId:v,isUsingKeyboard:f,onItemEnter:$,onItemLeave:L}),Y(Ce,{instance:l,dropdownSize:w,handleClick:M,commandHandler:N,trigger:J(e,"trigger"),hideOnClick:J(e,"hideOnClick")}),{t:s,ns:t,scrollbar:g,wrapStyle:h,dropdownTriggerKls:o,dropdownSize:w,triggerId:v,currentTabId:m,handleCurrentTabIdChange:G,handlerMainButtonClick:u=>{n("click",u)},handleEntryFocus:O,handleClose:F,handleOpen:A,handleBeforeShowTooltip:le,handleShowTooltip:V,handleBeforeHideTooltip:H,onFocusAfterTrapped:u=>{var z,se;u.preventDefault(),(se=(z=d.value)==null?void 0:z.focus)==null||se.call(z,{preventScroll:!0})},popperRef:r,contentRef:d,triggeringElementRef:p,referenceElementRef:a}}});function Fo(e,n,l,t,s,p){var a,r;const d=_("el-dropdown-collection"),g=_("el-roving-focus-group"),m=_("el-scrollbar"),f=_("el-only-child"),h=_("el-tooltip"),o=_("el-button"),i=_("arrow-down"),c=_("el-icon"),v=_("el-button-group");return B(),j("div",{class:q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[S(h,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(a=e.referenceElementRef)==null?void 0:a.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":e.trigger==="hover"?e.showTimeout:0,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":(r=e.virtualRef)!=null?r:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},He({content:b(()=>[S(m,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:b(()=>[S(g,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:b(()=>[S(d,null,{default:b(()=>[k(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:b(()=>[S(f,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:b(()=>[k(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(B(),U(v,{key:0},{default:b(()=>[S(o,W({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:b(()=>[k(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),S(o,W({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:b(()=>[S(c,{class:q(e.ns.e("icon"))},{default:b(()=>[S(i)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):x("v-if",!0)],2)}var No=K(So,[["render",Fo],["__file","dropdown.vue"]]);const Ro=D({components:{ElRovingFocusCollectionItem:lo},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:l,loop:t,onItemFocus:s,onItemShiftTab:p}=E(te,void 0),{getItems:a}=E(ne,void 0),r=fe(),d=I(),g=P(o=>{n("mousedown",o)},o=>{e.focusable?s(T(r)):o.preventDefault()}),m=P(o=>{n("focus",o)},()=>{s(T(r))}),f=P(o=>{n("keydown",o)},o=>{const{code:i,shiftKey:c,target:v,currentTarget:M}=o;if(i===C.tab&&c){p();return}if(v!==M)return;const F=co(o);if(F){o.preventDefault();let w=a().filter(N=>N.focusable).map(N=>N.ref);switch(F){case"last":{w.reverse();break}case"prev":case"next":{F==="prev"&&w.reverse();const N=w.indexOf(M);w=t.value?uo(w,N+1):w.slice(N+1);break}}Ve(()=>{re(w)})}}),h=y(()=>l.value===T(r));return Y(_e,{rovingFocusGroupItemRef:d,tabIndex:y(()=>T(h)?0:-1),handleMousedown:g,handleFocus:m,handleKeydown:f}),{id:r,handleKeydown:f,handleFocus:m,handleMousedown:g}}});function Po(e,n,l,t,s,p){const a=_("el-roving-focus-collection-item");return B(),U(a,{id:e.id,focusable:e.focusable,active:e.active},{default:b(()=>[k(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var ko=K(Ro,[["render",Po],["__file","roving-focus-item.vue"]]);const Bo=D({name:"DropdownItemImpl",components:{ElIcon:ue},props:Ie,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const l=oe("dropdown"),{role:t}=E(X,void 0),{collectionItemRef:s}=E($o,void 0),{collectionItemRef:p}=E(so,void 0),{rovingFocusGroupItemRef:a,tabIndex:r,handleFocus:d,handleKeydown:g,handleMousedown:m}=E(_e,void 0),f=ge(s,p,a),h=y(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),o=P(i=>{if([C.enter,C.numpadEnter,C.space].includes(i.code))return i.preventDefault(),i.stopImmediatePropagation(),n("clickimpl",i),!0},g);return{ns:l,itemRef:f,dataset:{[we]:""},role:h,tabIndex:r,handleFocus:d,handleKeydown:o,handleMousedown:m}}});function Ko(e,n,l,t,s,p){const a=_("el-icon");return B(),j(qe,null,[e.divided?(B(),j("li",{key:0,role:"separator",class:q(e.ns.bem("menu","item","divided"))},null,2)):x("v-if",!0),je("li",W({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:r=>e.$emit("clickimpl",r),onFocus:e.handleFocus,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:r=>e.$emit("pointermove",r),onPointerleave:r=>e.$emit("pointerleave",r)}),[e.icon?(B(),U(a,{key:0},{default:b(()=>[(B(),U(We(e.icon)))]),_:1})):x("v-if",!0),k(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Do=K(Bo,[["render",Ko],["__file","dropdown-item-impl.vue"]]);const he=()=>{const e=E(Ce,{}),n=y(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Mo=D({name:"ElDropdownItem",components:{ElDropdownCollectionItem:yo,ElRovingFocusItem:ko,ElDropdownItemImpl:Do},inheritAttrs:!1,props:Ie,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:l}){const{elDropdown:t}=he(),s=ve(),p=I(null),a=y(()=>{var o,i;return(i=(o=T(p))==null?void 0:o.textContent)!=null?i:""}),{onItemEnter:r,onItemLeave:d}=E(X,void 0),g=P(o=>(n("pointermove",o),o.defaultPrevented),ie(o=>{if(e.disabled){d(o);return}const i=o.currentTarget;i===document.activeElement||i.contains(document.activeElement)||(r(o),o.defaultPrevented||i==null||i.focus({preventScroll:!0}))})),m=P(o=>(n("pointerleave",o),o.defaultPrevented),ie(d)),f=P(o=>{if(!e.disabled)return n("click",o),o.type!=="keydown"&&o.defaultPrevented},o=>{var i,c,v;if(e.disabled){o.stopImmediatePropagation();return}(i=t==null?void 0:t.hideOnClick)!=null&&i.value&&((c=t.handleClick)==null||c.call(t)),(v=t.commandHandler)==null||v.call(t,e.command,s,o)}),h=y(()=>({...e,...l}));return{handleClick:f,handlePointerMove:g,handlePointerLeave:m,textContent:a,propsAndAttrs:h}}});function Ao(e,n,l,t,s,p){var a;const r=_("el-dropdown-item-impl"),d=_("el-roving-focus-item"),g=_("el-dropdown-collection-item");return B(),U(g,{disabled:e.disabled,"text-value":(a=e.textValue)!=null?a:e.textContent},{default:b(()=>[S(d,{focusable:!e.disabled},{default:b(()=>[S(r,W(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:b(()=>[k(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var ye=K(Mo,[["render",Ao],["__file","dropdown-item.vue"]]);const Lo=D({name:"ElDropdownMenu",props:Io,setup(e){const n=oe("dropdown"),{_elDropdownSize:l}=he(),t=l.value,{focusTrapRef:s,onKeydown:p}=E(Be,void 0),{contentRef:a,role:r,triggerId:d}=E(X,void 0),{collectionRef:g,getItems:m}=E(To,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:h,tabIndex:o,onBlur:i,onFocus:c,onMousedown:v}=E(te,void 0),{collectionRef:M}=E(ne,void 0),F=y(()=>[n.b("menu"),n.bm("menu",t==null?void 0:t.value)]),A=ge(a,g,s,f,M),w=P($=>{var L;(L=e.onKeydown)==null||L.call(e,$)},$=>{const{currentTarget:L,code:G,target:O}=$;if(L.contains(O),C.tab===G&&$.stopImmediatePropagation(),$.preventDefault(),O!==T(a)||!Co.includes(G))return;const V=m().filter(H=>!H.disabled).map(H=>H.ref);Ee.includes(G)&&V.reverse(),re(V)});return{size:t,rovingFocusGroupRootStyle:h,tabIndex:o,dropdownKls:F,role:r,triggerId:d,dropdownListWrapperRef:A,handleKeydown:$=>{w($),p($)},onBlur:i,onFocus:c,onMousedown:v}}});function Go(e,n,l,t,s,p){return B(),j("ul",{ref:e.dropdownListWrapperRef,class:q(e.dropdownKls),style:Qe(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:ee(e.onMousedown,["self"])},[k(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var Te=K(Lo,[["render",Go],["__file","dropdown-menu.vue"]]);const qo=Ne(No,{DropdownItem:ye,DropdownMenu:Te}),Qo=me(ye),Xo=me(Te);export{qo as E,Xo as a,Qo as b};
